<!--
NOTE: Minimal-diff update.
Adds an iframe carousel section that loads docs/html/html/samples.json,
plus a nav link to the new section.
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MedLA</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <nav>
      <a href="#top">Home</a>
      <!-- Added nav link -->
      <a href="#iframe-carousel">Samples</a>
    </nav>
  </header>

  <main id="top">
    <!-- Existing content preserved below (if any) -->

    <!-- Iframe carousel section (English copy) -->
    <section id="iframe-carousel" class="iframe-carousel" aria-label="Samples">
      <h2>Samples</h2>
      <p>Browse interactive samples below. Use the arrows to switch between items.</p>

      <div class="iframe-carousel__frame">
        <button type="button" class="iframe-carousel__btn iframe-carousel__btn--prev" aria-label="Previous sample">‹</button>
        <iframe class="iframe-carousel__iframe" title="Sample preview" loading="lazy" referrerpolicy="no-referrer"></iframe>
        <button type="button" class="iframe-carousel__btn iframe-carousel__btn--next" aria-label="Next sample">›</button>
      </div>

      <div class="iframe-carousel__meta">
        <div class="iframe-carousel__title" aria-live="polite"></div>
        <a class="iframe-carousel__open" target="_blank" rel="noopener noreferrer">Open in new tab</a>
      </div>

      <noscript>
        <p>This section requires JavaScript to load <code>docs/html/html/samples.json</code>.</p>
      </noscript>
    </section>

    <script>
      (function () {
        // Minimal, self-contained carousel logic.
        var jsonUrl = 'html/html/samples.json';
        var section = document.getElementById('iframe-carousel');
        if (!section) return;

        var iframe = section.querySelector('.iframe-carousel__iframe');
        var titleEl = section.querySelector('.iframe-carousel__title');
        var openEl = section.querySelector('.iframe-carousel__open');
        var prevBtn = section.querySelector('.iframe-carousel__btn--prev');
        var nextBtn = section.querySelector('.iframe-carousel__btn--next');

        var items = [];
        var idx = 0;

        function resolveUrl(u) {
          // Allow absolute, root-relative, or relative links.
          if (!u) return '';
          if (/^(https?:)?\/\//.test(u) || u[0] === '/') return u;
          // Default relative to docs/html/html/
          return 'html/html/' + u;
        }

        function render() {
          if (!items.length) return;
          var item = items[idx] || {};
          var url = resolveUrl(item.url || item.href || item.path || item.src);
          var title = item.title || item.name || ('Sample ' + (idx + 1));

          if (iframe) iframe.src = url;
          if (titleEl) titleEl.textContent = title + (items.length > 1 ? (' (' + (idx + 1) + '/' + items.length + ')') : '');
          if (openEl) {
            openEl.href = url || '#';
            openEl.style.visibility = url ? 'visible' : 'hidden';
          }

          if (prevBtn) prevBtn.disabled = items.length < 2;
          if (nextBtn) nextBtn.disabled = items.length < 2;
        }

        function move(delta) {
          if (!items.length) return;
          idx = (idx + delta + items.length) % items.length;
          render();
        }

        if (prevBtn) prevBtn.addEventListener('click', function () { move(-1); });
        if (nextBtn) nextBtn.addEventListener('click', function () { move(1); });

        fetch(jsonUrl, { cache: 'no-cache' })
          .then(function (r) { return r.json(); })
          .then(function (data) {
            // Accept array or {samples: [...]}
            items = Array.isArray(data) ? data : (data && (data.samples || data.items) ? (data.samples || data.items) : []);
            idx = 0;
            render();
          })
          .catch(function () {
            if (titleEl) titleEl.textContent = 'Unable to load samples.';
          });
      })();
    </script>
  </main>
</body>
</html>
